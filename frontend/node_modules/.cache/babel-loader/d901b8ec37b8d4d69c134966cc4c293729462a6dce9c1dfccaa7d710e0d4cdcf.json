{"ast":null,"code":"import _objectSpread from\"D:/Sach_cu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * File: frontend/src/pages/Login.js\r\n * Login Page Component\r\n */import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Container,Row,Col,Card,Form,Button,Alert}from'react-bootstrap';import{authAPI}from'../services/apiService';import{saveAuthData}from'../utils/authUtils';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();const[formData,setFormData]=useState({email:'',password:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[rememberMe,setRememberMe]=useState(false);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setError('');};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await authAPI.login(formData);const{token,userId,email,name}=response.data;// L∆∞u th√¥ng tin ƒëƒÉng nh·∫≠p\nsaveAuthData(token,{userId,email,name});toast.success('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');navigate('/');}catch(error){var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i!';setError(errorMessage);toast.error(errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"section\",{className:\"py-5\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,lg:5,children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm rounded-4 p-4\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83D\\uDD11 \\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Ch\\xE0o m\\u1EEBng b\\u1EA1n tr\\u1EDF l\\u1EA1i!\"})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fw-semibold\",children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Nh\\u1EADp email c\\u1EE7a b\\u1EA1n\",value:formData.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fw-semibold\",children:\"M\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",placeholder:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Ghi nh\\u1EDB \\u0111\\u0103ng nh\\u1EADp\",checked:rememberMe,onChange:e=>setRememberMe(e.target.checked)}),/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text-decoration-none\",children:\"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\"}),\"\\u0110ang \\u0111\\u0103ng nh\\u1EADp...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-box-arrow-in-right me-2\"}),\"\\u0110\\u0103ng nh\\u1EADp\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"Ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"fw-bold\",children:\"\\u0110\\u0103ng k\\xFD ngay\"})]})})]})})})})})});}export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","Container","Row","Col","Card","Form","Button","Alert","authAPI","saveAuthData","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","navigate","formData","setFormData","email","password","loading","setLoading","error","setError","rememberMe","setRememberMe","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response","login","token","userId","data","success","_error$response","_error$response$data","errorMessage","message","className","children","md","lg","Body","variant","onSubmit","Group","Label","Control","type","placeholder","onChange","required","Check","label","checked","to","disabled"],"sources":["D:/Sach_cu/frontend/src/pages/Login.js"],"sourcesContent":["/**\r\n * File: frontend/src/pages/Login.js\r\n * Login Page Component\r\n */\r\nimport React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Container, Row, Col, Card, Form, Button, Alert } from 'react-bootstrap';\r\nimport { authAPI } from '../services/apiService';\r\nimport { saveAuthData } from '../utils/authUtils';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n    setError('');\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await authAPI.login(formData);\r\n      const { token, userId, email, name } = response.data;\r\n\r\n      // L∆∞u th√¥ng tin ƒëƒÉng nh·∫≠p\r\n      saveAuthData(token, { userId, email, name });\r\n\r\n      toast.success('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');\r\n      navigate('/');\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.message || 'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i!';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"py-5\">\r\n      <Container>\r\n        <Row className=\"justify-content-center\">\r\n          <Col md={6} lg={5}>\r\n            <Card className=\"border-0 shadow-sm rounded-4 p-4\">\r\n              <Card.Body>\r\n                <div className=\"text-center mb-4\">\r\n                  <h2 className=\"section-title\">üîë ƒêƒÉng nh·∫≠p</h2>\r\n                  <p className=\"text-muted\">Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i!</p>\r\n                </div>\r\n\r\n                {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n                <Form onSubmit={handleSubmit}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label className=\"fw-semibold\">Email</Form.Label>\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      placeholder=\"Nh·∫≠p email c·ªßa b·∫°n\"\r\n                      value={formData.email}\r\n                      onChange={handleChange}\r\n                      required\r\n                    />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label className=\"fw-semibold\">M·∫≠t kh·∫©u</Form.Label>\r\n                    <Form.Control\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      placeholder=\"Nh·∫≠p m·∫≠t kh·∫©u\"\r\n                      value={formData.password}\r\n                      onChange={handleChange}\r\n                      required\r\n                    />\r\n                  </Form.Group>\r\n\r\n                  <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                    <Form.Check\r\n                      type=\"checkbox\"\r\n                      label=\"Ghi nh·ªõ ƒëƒÉng nh·∫≠p\"\r\n                      checked={rememberMe}\r\n                      onChange={(e) => setRememberMe(e.target.checked)}\r\n                    />\r\n                    <Link to=\"/forgot-password\" className=\"text-decoration-none\">\r\n                      Qu√™n m·∫≠t kh·∫©u?\r\n                    </Link>\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    type=\"submit\"\r\n                    className=\"w-100\"\r\n                    disabled={loading}\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n                        ƒêang ƒëƒÉng nh·∫≠p...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <i className=\"bi bi-box-arrow-in-right me-2\"></i>\r\n                        ƒêƒÉng nh·∫≠p\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                </Form>\r\n\r\n                <div className=\"text-center mt-4\">\r\n                  <p className=\"mb-0\">\r\n                    Ch∆∞a c√≥ t√†i kho·∫£n?{' '}\r\n                    <Link to=\"/register\" className=\"fw-bold\">\r\n                      ƒêƒÉng k√Ω ngay\r\n                    </Link>\r\n                  </p>\r\n                </div>\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}