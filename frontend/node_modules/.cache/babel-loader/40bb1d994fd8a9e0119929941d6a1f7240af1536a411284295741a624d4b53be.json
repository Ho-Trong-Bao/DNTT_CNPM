{"ast":null,"code":"/**\r\n * File: frontend/src/services/apiService.js\r\n * API Service - Gọi REST APIs từ Backend\r\n */import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8080/api';// Tạo axios instance\nconst apiClient=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Interceptor: Thêm token vào mọi request\napiClient.interceptors.request.use(config=>{const token=localStorage.getItem('authToken');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>Promise.reject(error));// Interceptor: Xử lý response errors\napiClient.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Token hết hạn hoặc không hợp lệ\nlocalStorage.removeItem('authToken');localStorage.removeItem('user');window.location.href='/login';}return Promise.reject(error);});// ============================================\n// AUTH APIs\n// ============================================\nexport const authAPI={register:data=>apiClient.post('/auth/register',data),login:data=>apiClient.post('/auth/login',data)};// ============================================\n// BOOK APIs\n// ============================================\nexport const bookAPI={// Lấy danh sách sách với filter\ngetAll:params=>apiClient.get('/books',{params}),// Lấy chi tiết sách\ngetById:id=>apiClient.get(\"/books/\".concat(id)),// Tạo sách mới\ncreate:data=>apiClient.post('/books',data),// Cập nhật sách\nupdate:(id,data)=>apiClient.put(\"/books/\".concat(id),data),// Xóa sách\ndelete:id=>apiClient.delete(\"/books/\".concat(id)),// Lấy sách nổi bật\ngetFeatured:()=>apiClient.get('/books/featured'),// Lấy sách của user\ngetByUser:userID=>apiClient.get(\"/books/user/\".concat(userID)),// Tìm kiếm sách\nsearch:searchParams=>apiClient.get('/books',{params:searchParams})};// ============================================\n// POST APIs\n// ============================================\nexport const postAPI={// Lấy bài đăng của tôi\ngetMyPosts:userID=>apiClient.get('/posts/my-posts',{params:{userID}}),// Tạo bài đăng mới\ncreate:(data,userID)=>apiClient.post('/posts',data,{params:{userID}}),// Cập nhật bài đăng\nupdate:(id,data)=>apiClient.put(\"/posts/\".concat(id),data),// Xóa bài đăng\ndelete:id=>apiClient.delete(\"/posts/\".concat(id)),// Lấy chi tiết bài đăng\ngetById:id=>apiClient.get(\"/posts/\".concat(id)),// Lấy bài đăng approved\ngetApproved:params=>apiClient.get('/posts/approved',{params}),// Admin duyệt bài\napprove:id=>apiClient.put(\"/posts/\".concat(id,\"/approve\")),// Admin từ chối bài\ndecline:id=>apiClient.put(\"/posts/\".concat(id,\"/decline\")),// Đánh dấu đã bán\nmarkSold:id=>apiClient.put(\"/posts/\".concat(id,\"/mark-sold\"))};// ============================================\n// USER APIs\n// ============================================\nexport const userAPI={// Lấy thông tin user\ngetById:id=>apiClient.get(\"/users/\".concat(id)),// Lấy profile hiện tại\ngetProfile:email=>apiClient.get('/users/profile',{params:{email}}),// Cập nhật profile\nupdateProfile:(id,data)=>apiClient.put(\"/users/\".concat(id),data),// Đổi mật khẩu\nchangePassword:(id,passwords)=>apiClient.post(\"/users/\".concat(id,\"/change-password\"),passwords),// Lấy tất cả users (Admin)\ngetAll:()=>apiClient.get('/users'),// Xóa user (Admin)\ndelete:id=>apiClient.delete(\"/users/\".concat(id))};// ============================================\n// CATEGORY APIs\n// ============================================\nexport const categoryAPI={getAll:()=>apiClient.get('/categories'),getById:id=>apiClient.get(\"/categories/\".concat(id)),create:data=>apiClient.post('/categories',data),update:(id,data)=>apiClient.put(\"/categories/\".concat(id),data),delete:id=>apiClient.delete(\"/categories/\".concat(id))};export default apiClient;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authAPI","register","data","post","login","bookAPI","getAll","params","get","getById","id","update","put","delete","getFeatured","getByUser","userID","search","searchParams","postAPI","getMyPosts","getApproved","approve","decline","markSold","userAPI","getProfile","email","updateProfile","changePassword","passwords","categoryAPI"],"sources":["D:/Sach_cu/frontend/src/services/apiService.js"],"sourcesContent":["/**\r\n * File: frontend/src/services/apiService.js\r\n * API Service - Gọi REST APIs từ Backend\r\n */\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';\r\n\r\n// Tạo axios instance\r\nconst apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Interceptor: Thêm token vào mọi request\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Interceptor: Xử lý response errors\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Token hết hạn hoặc không hợp lệ\r\n      localStorage.removeItem('authToken');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// ============================================\r\n// AUTH APIs\r\n// ============================================\r\nexport const authAPI = {\r\n  register: (data) => apiClient.post('/auth/register', data),\r\n  login: (data) => apiClient.post('/auth/login', data),\r\n};\r\n\r\n// ============================================\r\n// BOOK APIs\r\n// ============================================\r\nexport const bookAPI = {\r\n  // Lấy danh sách sách với filter\r\n  getAll: (params) => apiClient.get('/books', { params }),\r\n  \r\n  // Lấy chi tiết sách\r\n  getById: (id) => apiClient.get(`/books/${id}`),\r\n  \r\n  // Tạo sách mới\r\n  create: (data) => apiClient.post('/books', data),\r\n  \r\n  // Cập nhật sách\r\n  update: (id, data) => apiClient.put(`/books/${id}`, data),\r\n  \r\n  // Xóa sách\r\n  delete: (id) => apiClient.delete(`/books/${id}`),\r\n  \r\n  // Lấy sách nổi bật\r\n  getFeatured: () => apiClient.get('/books/featured'),\r\n  \r\n  // Lấy sách của user\r\n  getByUser: (userID) => apiClient.get(`/books/user/${userID}`),\r\n  \r\n  // Tìm kiếm sách\r\n  search: (searchParams) => apiClient.get('/books', { params: searchParams }),\r\n};\r\n\r\n// ============================================\r\n// POST APIs\r\n// ============================================\r\nexport const postAPI = {\r\n  // Lấy bài đăng của tôi\r\n  getMyPosts: (userID) => apiClient.get('/posts/my-posts', { params: { userID } }),\r\n  \r\n  // Tạo bài đăng mới\r\n  create: (data, userID) => apiClient.post('/posts', data, { params: { userID } }),\r\n  \r\n  // Cập nhật bài đăng\r\n  update: (id, data) => apiClient.put(`/posts/${id}`, data),\r\n  \r\n  // Xóa bài đăng\r\n  delete: (id) => apiClient.delete(`/posts/${id}`),\r\n  \r\n  // Lấy chi tiết bài đăng\r\n  getById: (id) => apiClient.get(`/posts/${id}`),\r\n  \r\n  // Lấy bài đăng approved\r\n  getApproved: (params) => apiClient.get('/posts/approved', { params }),\r\n  \r\n  // Admin duyệt bài\r\n  approve: (id) => apiClient.put(`/posts/${id}/approve`),\r\n  \r\n  // Admin từ chối bài\r\n  decline: (id) => apiClient.put(`/posts/${id}/decline`),\r\n  \r\n  // Đánh dấu đã bán\r\n  markSold: (id) => apiClient.put(`/posts/${id}/mark-sold`),\r\n};\r\n\r\n// ============================================\r\n// USER APIs\r\n// ============================================\r\nexport const userAPI = {\r\n  // Lấy thông tin user\r\n  getById: (id) => apiClient.get(`/users/${id}`),\r\n  \r\n  // Lấy profile hiện tại\r\n  getProfile: (email) => apiClient.get('/users/profile', { params: { email } }),\r\n  \r\n  // Cập nhật profile\r\n  updateProfile: (id, data) => apiClient.put(`/users/${id}`, data),\r\n  \r\n  // Đổi mật khẩu\r\n  changePassword: (id, passwords) => apiClient.post(`/users/${id}/change-password`, passwords),\r\n  \r\n  // Lấy tất cả users (Admin)\r\n  getAll: () => apiClient.get('/users'),\r\n  \r\n  // Xóa user (Admin)\r\n  delete: (id) => apiClient.delete(`/users/${id}`),\r\n};\r\n\r\n// ============================================\r\n// CATEGORY APIs\r\n// ============================================\r\nexport const categoryAPI = {\r\n  getAll: () => apiClient.get('/categories'),\r\n  getById: (id) => apiClient.get(`/categories/${id}`),\r\n  create: (data) => apiClient.post('/categories', data),\r\n  update: (id, data) => apiClient.put(`/categories/${id}`, data),\r\n  delete: (id) => apiClient.delete(`/categories/${id}`),\r\n};\r\n\r\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}