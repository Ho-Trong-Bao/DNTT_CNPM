<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard | Sách Cũ Theo Khu Vực</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light bg-light shadow-sm">
      <div class="container-fluid">
        <span class="navbar-brand fw-bold">
          <img src="assets/images/logo.png" alt="Logo" height="32"/>
          ADMIN DASHBOARD
        </span>

        <button class="btn btn-outline-danger" id="logoutBtn">
          <i class="bi bi-box-arrow-right"></i> Đăng xuất
        </button>
      </div>
    </nav>

    <!-- DASHBOARD -->
    <section class="container py-5">
      <h3>Chào mừng <span id="adminName"></span>!</h3>
      <p>Đây là trang quản trị của hệ thống Sách Cũ Theo Khu Vực.</p>

      <div class="mt-4 d-flex gap-2">
        <a href="admin-posts.html" class="btn btn-primary">
          <i class="bi bi-journal-text"></i> Quản lý bài đăng
        </a>

        <a href="admin-users.html" class="btn btn-secondary">
          <i class="bi bi-people-fill"></i> Quản lý người dùng
        </a>

        <a href="admin-categories.html" class="btn btn-success">
          <i class="bi bi-tags-fill"></i> Quản lý danh mục
        </a>

        <a href="admin-reports.html" class="btn btn-warning text-white">
          <i class="bi bi-flag-fill"></i> Báo cáo vi phạm
        </a>
      </div>

      <div class="mt-5" id="dashboardContent"></div>
    </section>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/api.js"></script>

    <script>
      // ===========================
      // KIỂM TRA ADMIN LOGIN
      // ===========================
      const admin = JSON.parse(localStorage.getItem("admin") || "{}");
      const adminToken = localStorage.getItem("adminToken");

      if (!adminToken || !admin || admin.role !== "ADMIN") {
        console.warn("⚠ Không có adminToken hoặc không phải admin → Chuyển hướng");
        window.location.href = "loginAdmin.html";
      } else {
        document.getElementById("adminName").textContent = admin.name || "Admin";
      }

      // ===========================
      // LOGOUT (CHUẨN)
      // ===========================
      document.getElementById("logoutBtn").addEventListener("click", () => {
        localStorage.removeItem("adminToken");
        localStorage.removeItem("admin");
        window.location.href = "loginAdmin.html";
      });
    </script>
  </body>
</html>
